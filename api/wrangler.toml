name = "stereos-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[vars]
ENVIRONMENT = "development"

# D1 Database for API keys and usage tracking
[[d1_databases]]
binding = "DB"
database_name = "stereos"
database_id = "c203c7ce-7461-476f-a742-6f451add35b0"

# KV Namespace for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT"
id = "af0d1ddd00af460d94b50e959b6b353a"

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }

# Secrets (set via wrangler secret put):
# wrangler secret put JWT_PRIVATE_KEY
# wrangler secret put STRIPE_WEBHOOK_SECRET
# wrangler secret put STRIPE_API_KEY
# wrangler secret put RESEND_API_KEY

# Optional: customize the from email for Resend
# [vars]
# RESEND_FROM_EMAIL = "james@hello.atelierlogos.studio"
