name = "stereos"
main = "apps/api/src/worker.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# API-only worker. Frontend deploys separately (e.g. Netlify).

[vars]
# Your Worker URL (used by Better Auth callbacks)
BASE_URL = "https://stereos.jdbohrman.workers.dev"
# Comma-separated origins for CORS â€” set to your frontend URL (e.g. https://your-app.netlify.app)
# Override in Cloudflare dashboard or: npx wrangler secret put TRUSTED_ORIGINS
TRUSTED_ORIGINS = "https://stereos.netlify.app"

# Secrets: npx wrangler secret put <NAME>
# - DATABASE_URL (Neon Postgres URL)
# - BETTER_AUTH_SECRET
# - STRIPE_SECRET_KEY
# - STRIPE_PRICE_ID
# - STRIPE_WEBHOOK_SECRET
# - RESEND_API_KEY (optional; for verification emails in Worker)
# - RESEND_FROM_EMAIL (optional; default onboarding@resend.dev)

[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1